<div>
  <div class="row fixbutton">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-header">
          Object Information Details
        </div>
        <div class="col-lg-12" style="margin:8px;">
          <button type="button" class="btn btn-primary" (click)="parent(contentConfirm)" title="Delete Object">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button type="button" class="btn btn-primary" style="margin-left: 5px;" (click)="AddMetadata()">
            <i class="fas fa-plus"></i>Metadata
          </button>
          <button type="button" class="btn btn-primary" style="margin-left: 5px;" (click)="AddOrUpdateMetadata()" [disabled]="!editmetadata"
                   title="Save Metadata To Database">
            <i class="far fa-save"></i> Save
          </button>
          <button type="button" class="btn btn-primary" style="margin-left: 5px;"
                  (click)="DownloadFileToActivity(objectName)" title="Download object">
            <i class="fas fa-download"></i>Download
          </button>
          <button type="button" class="btn btn-danger" style="margin-left: 5px;" (click)="open(content, 0)"
                  title="Delete Object">
            <i class="fas fa-trash-alt"></i>Delete
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top:110px;">
    <div class="col grid-margin stretch-card">
      <div class="card card-statistics">
        <div class="card-body app-card-body">
          <div>
            <i class="mdi mdi-file text-primary" style="font-size: 1.5rem; vertical-align:middle;"></i>
            <span style="width:9rem; display: inline-block; margin-left: 0.3rem">Object Name:</span>
            <span class="font-weight-medium text-right mb-0">{{currentObject?.Key}}</span>
          </div>
          <div *ngIf="accessPolicy==='Public'">
            <i class="mdi mdi-file text-primary" style="font-size: 1.5rem; vertical-align:middle;"></i>
            <span style="width:9rem; display: inline-block; margin-left: 0.3rem">Url:</span>
            <a 
            style="cursor: pointer;">{{currentObject?.Link}}</a>
          </div>
          <div>
            <i class="mdi mdi-harddisk text-success" style="font-size: 1.5rem; vertical-align:middle;"></i>
            <span style="width:9rem; display: inline-block; margin-left: 0.3rem">Size:</span>
            <span class="font-weight-medium text-right mb-0">{{common.formatSizeUnits(currentObject?.Size)}}</span>
          </div>
          <div>
            <i class="mdi mdi-timer text-info" style="font-size: 1.5rem; vertical-align:middle;"></i>
            <span style="width:9rem; display: inline-block; margin-left: 0.3rem">Last Modified:</span>
            <span
              class="font-weight-medium text-right mb-0">{{currentObject?.LastModifiedDateTime| date: 'dd/MM/yyyy HH:mm'}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card ">
    <div class="card-header">
      Metadata
    </div>
    <div class="card-body" style="overflow-x: auto;">
      <table class="table table-hover">
        <thead>
        <tr>
          <th width="5%">Order</th>
          <th>Key</th>
          <th>Value</th>
          <th width="10%"></th>
        </tr>
        </thead>
        <tbody *ngIf="metaData?.Data">
        <tr *ngFor='let meta of metaData?.Data; index as i'>
          <td>{{i + 1}}</td>
          <td><input type="text" [(ngModel)]="meta.Key" class="form-control" [readOnly]="!editmetadata || (i !== currentindex)"></td>
          <td><input type="text" [(ngModel)]="meta.Value" class="form-control" [readOnly]="!editmetadata || (i !== currentindex)"></td>
          <td>
            <button type="button" class="btn btn-danger" style="margin-left: 5px;" (click)="open(contentMeta, i)" title="Delete metadata">
              <i class="fas fa-trash-alt"></i>
            </button>
            <button type="button" class="btn btn-primary" style="margin-left: 5px;" title="Edit metadata">
              <i class="fas fa-edit" (click)="editMeta(i)"></i>
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Warning!</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete this object?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" (click)="RemoveObject()">Ok</button>
      <button type="button" class="btn btn-primary" (click)="d('Cross click')">Cancel</button>
    </div>
  </ng-template>

  <ng-template #contentMeta let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Warning!</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete this metadata?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" (click)="DeleteMetaData()">Ok</button>
      <button type="button" class="btn btn-primary" (click)="d('Cross click')">Cancel</button>
    </div>
  </ng-template>

  <ng-template #contentConfirm let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Warning!</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>You have not saved the metadata! Do you want to continue?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" (click)="confirmBack()">Ok</button>
      <button type="button" class="btn btn-primary" (click)="d('Cross click')">Cancel</button>
    </div>
  </ng-template>

  <ngx-loading [show]="loading"
               [config]="{animationType: ngxLoadingAnimationTypes.circleSwish, backdropBorderRadius: '3px', fullScreenBackdrop:true}">
  </ngx-loading>

</div>




